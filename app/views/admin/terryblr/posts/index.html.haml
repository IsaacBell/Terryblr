= render :partial => "terryblr/admin/content_nav" 

- today = Date.today
- @date ||= today
- content_for :sidebar do
  %ul.summary
    %li.divider
    %li= pluralize Post.published.count, 'Post'
    %li= link_to "Published", url_for(params.merge(:state => 'published'))
    %li= link_to "Drafts", url_for(params.merge(:state => 'drafted', :month => @date.month, :year => @date.year))
    - if params[:state].blank?
      %li.divider
      %li Filter:
      %li
        Month: 
        =select_tag "archive_month", options_for_select(Date::MONTHNAMES.map{|m| [m, Date::MONTHNAMES.index(m)]}, @date.month), :onchange => "window.location = '#{filter_admin_posts_path}?state=#{params[:state]}&month='+this.value+'&year='+$('#archive_year').val()"
      %li
        Year: 
        =select_tag "archive_year", options_for_select((today.year-5..today.year).to_a.reverse, @date.year), :onchange => "window.location = '#{filter_admin_posts_path}?state=#{params[:state]}&year='+this.value+'&month='+$('#archive_month').val()"

%h2 
  Archives: #{pluralize @posts.size, 'Posts'}

= render :partial => 'admin/common/archives'